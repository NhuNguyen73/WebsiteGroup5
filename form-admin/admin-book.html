<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <title>Quản lý sách - Admin</title>
    <link rel="stylesheet" href="admin.css">
    <link rel="stylesheet" href=".\css\admin.css">
    <link rel="stylesheet" href=".\css\admin-courses.css"> <!-- CSS riêng cho trang Dashboard -->
    <!-- Thêm Chart.js -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
</head>
<body>
    <header>
        <div class="logo">Admin - YourWebsite</div>
        <div class="user-info">
            <span id="admin-name">[Admin Name]</span>
            <a href="/logout">Đăng xuất</a>
        </div>
    </header>

    <aside class="sidebar" id="sidebar">
        <!-- Sidebar Brand -->
        <div class="sidebar-brand">
            <i class="fas fa-book-open" style="padding-right: 8px; "></i>
            <span>Books Admin</span>
        </div>
    
        <!-- Navigation -->
        <ul class="nav-list">
            <li class="nav-item">
                <a href="admin-dashboard.html" class="nav-link">
                    <i class="fas fa-tachometer-alt" style="padding-right: 8px; "></i>
                    <span>Bảng điều khiển</span>
                </a>
            </li>
            <li class="nav-item">
                <a href="admin-users.html" class="nav-link">
                    <i class="fas fa-users" style="padding-right: 8px; "></i>
                    <span>Quản lý người dùng</span>
                </a>
            </li>
            <li class="nav-item">
                <a href="admin-book.html" class="nav-link">
                    <i class="fas fa-book" style="padding-right: 8px; "></i>
                    <span>Quản lý sách</span>
                </a>
            </li>
            <li class="nav-item">
                <a href="admin-library-cards.html" class="nav-link">
                    <i class="fas fa-id-card" style="padding-right: 8px; "></i>
                    <span>Quản lý thẻ thư viện</span>
                </a>
            </li>
            <li class="nav-item">
                <a href="admin-borrow-records.html" class="nav-link">
                    <i class="fas fa-tasks" style="padding-right: 8px; "></i>
                    <span>Quản lý phiếu mượn trả</span>
                </a>
            </li>
            <li class="nav-item">
                <a href="admin-book-reservations.html" class="nav-link">
                    <i class="fas fa-shopping-cart" style="padding-right: 8px; "></i>
                    <span>Quản lý đặt mượn sách</span>
                </a>
            </li>
            <li class="nav-item">
                <a href="admin-stats.html" class="nav-link">
                    <i class="fas fa-chart-area" style="padding-right: 8px; "></i>
                    <span>Thống kê</span>
                </a>
            </li>
        </ul>
    
        <!-- Toggle Button -->
        <div class="sidebar-toggle">
            <button id="sidebarToggle"><i class="fas fa-bars"></i></button>
        </div>
    </aside>

    <main>
        <h1>Quản lý sách</h1>
        <button class="btn" onclick="toggleForm('add-book-form')">Thêm sách</button>
        <table id="book-list">
            <thead>
                <tr>
                    <th>ID Sách</th>
                    <th>Tên sách</th>
                    <th>Mô tả</th>
                    <th>Giá bìa sách</th>
                    <th>Tác giả</th>
                    <th>Thể loại</th>
                    <th>Ảnh đại diện</th>
                    <th>Ngày tạo</th>
                    <th>Ngày cập nhật</th>
                    <th>Hành động</th>
                </tr>
            </thead>
            <tbody>
                <tr>
                    <td>BOOK-2025-001</td>
                    <td>Đắc Nhân Tâm</td>
                    <td>Nghệ thuật đối nhân xử thế</td>
                    <td>86,000 VNĐ</td>
                    <td>Dale Carnegie</td>
                    <td>Tâm lý</td>
                    <td><img src="https://salt.tikicdn.com/ts/product/55/c8/39/6d1372fea0c6c36506983c62f8a6b050.jpg" alt="Đắc Nhân Tâm" width="50"></td>
                    <td>2025-03-12</td>
                    <td>2025-03-15</td>
                    <td>
                        <a href="#" class="btn" onclick="editBook('BOOK-2025-001')">Sửa</a>
                        <a href="#" class="btn" onclick="deleteBook('BOOK-2025-001')">Xóa</a>
                    </td>
                </tr>
            </tbody>
        </table>
        <!-- Form Thêm Sách -->
        <div id="add-book-form" class="form-container" style="display:none;">
            <h2>Thêm Sách</h2>
            <input type="text" placeholder="ID Sách" id="book-id" readonly>
            <input type="text" placeholder="Tên sách" id="book-title" required>
            <textarea placeholder="Mô tả" id="book-description" required></textarea>
            <input type="number" placeholder="Giá bìa sách (VNĐ)" id="book-price" required>
            <input type="text" placeholder="Tác giả" id="book-author" required>
            <select id="book-category" required>
                <option value="">Chọn thể loại</option>
                <option value="van-hoc">Tài liệu học tập</option>
                <option value="khoa-hoc">Tài liệu lịch sử</option>
                <option value="lich-su">Sách phát triển bản thân</option>
                <option value="tam-ly">Tiểu thuyết</option>
            </select>
            <input type="file" id="book-image" accept="image/*" required>
            <input type="datetime-local" id="book-created-at" readonly>
            <input type="datetime-local" id="book-updated-at" readonly>
            <button class="btn" onclick="saveBook()">Lưu</button>
        </div>
        
    </main>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/js/all.min.js"></script> <!-- Font Awesome : Các ký hiêu ở aside -->

    <script>
        // Initialize page
        document.addEventListener('DOMContentLoaded', function() {
            const now = new Date().toISOString().slice(0, 16);
            document.getElementById('book-created-at').value = now;
            document.getElementById('book-updated-at').value = now;
            
            // Generate a new book ID
            document.getElementById('book-id').value = generateBookId();
        });

        function generateBookId() {
            const year = new Date().getFullYear();
            const random = Math.floor(Math.random() * 1000).toString().padStart(3, '0');
            return `BOOK-${year}-${random}`;
        }

        function toggleForm(formId) {
            document.getElementById(formId).style.display =
                document.getElementById(formId).style.display === 'none' ? 'block' : 'none';
        }

        function saveBook() {
            // Validate form
            const form = document.getElementById('add-book-form');
            const inputs = form.querySelectorAll('input[required], select[required], textarea[required]');
            let isValid = true;

            inputs.forEach(input => {
                if (!input.value.trim()) {
                    isValid = false;
                    input.style.borderColor = 'red';
                } else {
                    input.style.borderColor = '';
                }
            });

            if (!isValid) {
                alert('Vui lòng điền đầy đủ thông tin bắt buộc');
                return;
            }

            // Get form data
            const bookData = {
                id: document.getElementById('book-id').value,
                title: document.getElementById('book-title').value,
                description: document.getElementById('book-description').value,
                price: document.getElementById('book-price').value,
                author: document.getElementById('book-author').value,
                category: document.getElementById('book-category').value,
                image: document.getElementById('book-image').files[0],
                createdAt: document.getElementById('book-created-at').value,
                updatedAt: document.getElementById('book-updated-at').value
            };

            // Here you would normally send this data to your backend
            console.log('Saving book:', bookData);
            alert('Sách đã được lưu thành công!');
            
            // Reset form and hide it
            form.reset();
            toggleForm('add-book-form');
            
            // Generate new ID for next book
            document.getElementById('book-id').value = generateBookId();
        }

        function editBook(bookId) {
            // Here you would normally fetch book data from backend
            console.log('Editing book:', bookId);
            alert('Chức năng chỉnh sửa sẽ được cập nhật sau!');
        }

        function deleteBook(bookId) {
            if (confirm('Bạn có chắc chắn muốn xóa sách này?')) {
                // Here you would normally send delete request to backend
                console.log('Deleting book:', bookId);
                alert('Sách đã được xóa thành công!');
            }
        }
    </script>
</body>
</html>